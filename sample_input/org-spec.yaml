# AWS Organization Specification

master_account_id: 'XXXXXXXXXXXX'
default_policy: FullAWSAccess
default_ou: root

organizational_unit_spec:
  - Name: root
    Accounts:
    Child_OU:
      - Name: prod
        Policies: 
        Accounts:
          - Ashley Gould
          - blee-prod
          - gorp-dev
      - Name: auth
        Accounts:
          - auth
        Policies:
          - auth-only
      - Name: poc
        Accounts:
          - gorp-poc
          - blee-poc
          - ghost
          - gorp-prod
        Policies: 
          - dev_service_policy
          - poc_service_policy
      - Name: nonprod
        #Ensure: absent
        Accounts:
          - blee-dev
        Policies: 
          - dev_service_policy
        Child_OU:
          - Name: formal
            Accounts:
              - test1
              - test2
              - test3
          - Name: nice
          - Name: humble


policy_spec:
  - Name: FullAWSAccess
  - Name: poc_service_policy
    Ensure: present
    Description: POC Accounts
    Effect: Allow
    Actions:
      - iam:*
      - s3:*
      - lambda:*
      - cloudformation:*
      - cloudtrail:*
      - sts:*
      - sns:*
      - cloudwatch:*
  - Name: dev_service_policy
    Ensure: present
    Description: Development Accounts
    Effect: Allow
    Actions:
      - ec2:*
      - cloudfront:*
      - iam:*
      - s3:*
      - lambda:*
      - cloudformation:*
      - cloudtrail:*
      - sts:*
      - sns:*
      - cloudwatch:*
  - Name: no-services
    Ensure: absent
    Description: Deny access to all AWS services
    Effect: Deny
    Actions:
      - '*'
  - Name: auth-only
    Ensure: present
    Description: Utility account for configuring IAM user access.
    Effect: Allow
    Actions:
      - iam:*
      - cloudformation:*
      - cloudtrail:*
  - Name: test-policy
    Ensure: present
    Description: Utility account for configuring IAM user access.
    Effect: Allow
    Actions:
      - iam:*
      - cloudformation:*
      - cloudtrail:*

